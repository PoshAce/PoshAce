<?php
/** @var \Magento\Catalog\Block\Product\View $block */
$product = $block->getProduct();
$amazon_price = $product->getBuyFromAmazonIn();

// Get product image URL
$imageUrl = $block->getImage($product, 'product_page_image_large')->getImageUrl();

// Get prices
$regularPrice = $product->getPrice();
$specialPrice = $product->getFinalPrice();

// Calculate savings
$saveAmount = $regularPrice - $specialPrice;
$savePercent = $regularPrice > 0 ? round(($saveAmount / $regularPrice) * 100) : 0;

// Helper function for Indian number formatting
function formatIndianPrice($price) {
    $locale = 'en_IN';
    $fmt = new \NumberFormatter($locale, \NumberFormatter::DECIMAL);
    return $fmt->format($price);
}
?>

<div class="dynamic-banner" id="dynamic-banner">
  <div class="BannerImageWr">
<img src="<?= $imageUrl ?>" alt="<?= $block->escapeHtmlAttr($product->getName()) ?>" class="banner-img" />
  </div>
  

  <div class="banner-content">
    <div class="price-card">
      <div class="price-block">
        <p class="price-label">Amazon</p>
        <p class="price-value old-price">â‚¹ <?= formatIndianPrice($regularPrice) ?></p>
      </div>
      <div class="price-block">
        <p class="price-label">Our Price</p>
        <p class="price-value new-price">â‚¹ <?= formatIndianPrice($specialPrice) ?></p>
      </div>
      <span class="save-chip">Save <?= $savePercent ?>% | â‚¹ <?= formatIndianPrice($saveAmount) ?></span>
    </div>

    <h2 class="headline">Experience the Future of Techâ€”Now in India</h2>
    <div class="badges">
      <div class="badge">ğŸ”Ÿ&nbsp;Years&nbsp;Trust</div>
      <div class="badge accent-yellow">ğŸŒ&nbsp;Rare&nbsp;Intl.</div>
      <div class="badge">ğŸ’³&nbsp;UPI&nbsp;|&nbsp;Card&nbsp;|&nbsp;EMI</div>
    </div>

    <div class="cta-group">
<form data-role="tocart-form"
      action="<?= $block->getUrl('checkout/cart/add') ?>"
      method="post">
    <input type="hidden" name="form_key" value="<?= $block->getFormKey() ?>" />
    <input type="hidden" name="product" value="<?= $product->getId() ?>" />
    <button type="submit" title="Add to Cart" class="cta-btn direct-btn" data-cta="direct">
      Buy &amp; Save
    </button>
</form>

      <a href="<?= $block->escapeUrl($product->getBuyFromAmazonIn()) ?>" class="cta-btn amazon-btn" target="_blank" rel="nofollow sponsored" data-cta="amazon">
        <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_390_10)">
<mask id="mask0_390_10" style="mask-type:luminance" maskUnits="userSpaceOnUse" x="0" y="0" width="22" height="22">
<path d="M22 0H0V22H22V0Z" fill="white"/>
</mask>
<g mask="url(#mask0_390_10)">
<path d="M11 22C17.0752 22 22 17.0752 22 11C22 4.92486 17.0752 0 11 0C4.92486 0 0 4.92486 0 11C0 17.0752 4.92486 22 11 22Z" fill="#333333"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M14.9188 14.4375C14.85 14.4375 14.7812 14.4375 14.7812 14.5063C14.7125 14.5063 14.6438 14.575 14.575 14.575L14.5063 14.6437L14.3687 14.7125C13.2 15.1937 11.9625 15.4688 10.7937 15.4688C10.725 15.4688 10.725 15.4688 10.6562 15.4688C8.86875 15.4688 7.35625 14.6438 5.9125 13.8188C5.84375 13.8188 5.775 13.75 5.775 13.75C5.70625 13.75 5.6375 13.75 5.56875 13.8188C5.5 13.8188 5.5 13.8875 5.5 13.9562C5.5 14.025 5.56875 14.1625 5.6375 14.1625C7.0125 15.4 8.59375 16.5 10.5875 16.5H10.725C12.0313 16.5 13.5437 16.0187 14.6437 15.3312C14.7812 15.2625 14.9187 15.125 15.0562 15.0562C15.125 14.9875 15.1938 14.9188 15.1938 14.7812C15.2625 14.5062 15.0563 14.4375 14.9188 14.4375ZM16.5 13.75C16.5 13.6125 16.5 13.5438 16.4312 13.475C16.3625 13.4063 16.3625 13.4062 16.2938 13.4062C16.1563 13.3375 15.95 13.3375 15.675 13.3375C15.4687 13.3375 15.2625 13.3375 15.0562 13.4062L14.85 13.475L14.7125 13.5438C14.575 13.6125 14.4375 13.6812 14.3 13.75C14.2312 13.8188 14.1625 13.8875 14.1625 13.9562C14.1625 14.025 14.1625 14.0938 14.2313 14.1625C14.3 14.2313 14.3687 14.2313 14.3687 14.2313H14.4375C14.575 14.2313 14.7125 14.1625 14.85 14.1625H15.3312H15.6063H15.675V14.2313C15.675 14.3688 15.6063 14.575 15.5375 14.7812C15.4688 14.9875 15.4 15.1937 15.3312 15.3312V15.4688C15.3312 15.5375 15.3312 15.6063 15.4 15.6063C15.4687 15.675 15.5375 15.675 15.5375 15.675C15.6063 15.675 15.675 15.675 15.7437 15.6063C16.2937 15.125 16.5 14.3688 16.5 13.8875V13.75ZM11.6187 8.59375C11.275 8.59375 10.9312 8.6625 10.5875 8.6625C10.0375 8.73125 9.4875 8.8 9.00625 9.075C8.1125 9.41875 7.49375 10.2437 7.49375 11.3438C7.49375 12.7875 8.3875 13.475 9.55625 13.475C9.96875 13.475 10.2438 13.4062 10.5188 13.3375C11 13.2 11.3438 12.925 11.825 12.4438C12.1 12.7875 12.1687 12.9937 12.65 13.3375C12.7875 13.4062 12.925 13.4062 12.9937 13.3375C13.2687 13.0625 13.8187 12.65 14.0938 12.4438C14.2313 12.375 14.1625 12.1688 14.0938 12.1C13.8187 11.7563 13.5438 11.4812 13.5438 10.7937V8.59375C13.5438 7.7 13.6125 6.80625 12.925 6.1875C12.375 5.70625 11.4812 5.5 10.7937 5.5H10.5188C9.28125 5.56875 7.975 6.11875 7.7 7.63125C7.63125 7.8375 7.76875 7.90625 7.90625 7.90625L9.28125 8.04375C9.41875 8.04375 9.4875 7.90625 9.55625 7.76875C9.69375 7.21875 10.1062 6.94375 10.5875 6.94375H10.6562C10.9313 6.94375 11.275 7.08125 11.4125 7.2875C11.6188 7.5625 11.55 7.975 11.55 8.31875V8.59375H11.6187ZM11.6187 9.96875C11.6187 10.5188 11.6188 10.9313 11.3438 11.4813C11.2062 11.825 10.8625 12.0313 10.5875 12.1C10.5187 12.1 10.45 12.1 10.3813 12.1C9.83125 12.1 9.55625 11.6875 9.55625 11.0688C9.55625 10.3125 10.0375 9.9 10.5875 9.7625C10.9312 9.69375 11.275 9.69375 11.6187 9.69375V9.96875Z" fill="white"/>
</g>
</g>
<defs>
<clipPath id="clip0_390_10">
<rect width="22" height="22" fill="white"/>
</clipPath>
</defs>
</svg>

        Buy it from Amazon.in
      </a>
    </div>    <div class="trust-icons">
      <div class="trust-item">
        <svg viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zM11 17l-4-4 1.41-1.41L11 14.17l4.59-4.58L17 11l-6 6z"/></svg>
        Secure Checkout
      </div>
      <div class="trust-item">
        <svg viewBox="0 0 24 24"><path d="M12 4a8 8 0 100 16 8 8 0 000-16zm1 11h-2v-2h2v2zm0-4h-2V7h2v4z"/></svg>
        1â€‘Year Warranty
      </div>
      <div class="trust-item">
        <svg viewBox="0 0 24 24"><path d="M20 8h-3V4H7v4H4l-1 2v10h2v-2h14v2h2V10l-1-2zm-11 0V6h6v2H9zm10 8H5v-5h14v5z"/></svg>
        Easy Returns
      </div>
      <div class="trust-item">
        <svg viewBox="0 0 24 24"><path d="M20.16 12.72l1.41-4.26-1.43-.47-1.34 4.04A6.96 6.96 0 0013 5c-3.86 0-7 3.14-7 7 0 .34.03.67.08 1H2l3.89 3.89.07-.14L10 13H7.05A5 5 0 1113 18a4.98 4.98 0 01-4.47-2.72L6.11 17A6.977 6.977 0 0013 20c3.04 0 5.64-1.82 6.79-4.47l.37-1.06z"/></svg>
        Fast Delivery
      </div>
    </div>

    <div class="bundle-arrow">Bundle & Save<br><span>â†“</span></div>
  </div>

  <div class="testimonials" aria-label="Customer testimonials">
    <div class="AnimationBorderWrapper">
    <div class="testi-inner">
      <div class="testimonial"><q>Lightning-fast shipping for an international gadget. Totally worth the wait!</q><span>â€“ Aarav, Pune</span></div>
      <div class="testimonial"><q>Saved over â‚¹2k vs Amazon and got loyalty points for my next build.</q><span>â€“ Ria, Bengaluru</span></div>
      <div class="testimonial"><q>Rare color variant I couldnâ€™t find anywhere else. Excellent packaging.</q><span>â€“ Kabir, Delhi</span></div>
      <div class="testimonial"><q>Customer support actually knew the tech specs. Impressive.</q><span>â€“ Meera, Hyderabad</span></div>
      <div class="testimonial"><q>EMI checkout was seamless. Excited for more exclusive drops!</q><span>â€“ Arjun, Mumbai</span></div>
    </div>
    </div>
  </div>
</div>